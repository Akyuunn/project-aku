{% extends 'base.html' %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/citas.css' %}">
    <link rel="stylesheet" href="{% static 'css/citas_busqueda.css' %}">
{% endblock %}

{% block contenido %}
<h2>Gestión de Citas</h2>

<div class="card-custom">
    <form method="GET" action="">
        <div>
            <label>Fecha</label>
            <input type="date" name="fecha">
        </div>

        <div>
            <label>Médico</label>
            <select name="medico">
                <option value="">-- Todos --</option>
                {% for m in medicos %}
                    <option value="{{ m.id }}">{{ m.nombre_completo }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div>
             <label>Acción</label>
             <button type="submit" class="btn btn-primary" style="width:100%;">Buscar</button>
        </div>
    </form>
</div>
<br>

<div class="card-custom">
    <span style="font-weight:bold; color:#0b3a91;">Listado de Citas</span>
    <a href="{% url 'crear_cita' %}" class="btn btn-success">Registrar Nueva Cita</a>
</div>

<div class="table-custom">
<table>
    <thead>
        <tr>
            <th>Paciente</th>
            <th>Médico</th>
            <th>Especialidad</th>
            <th>Fecha</th>
            <th>Hora</th>
            <th>Acción</th>
        </tr>
    </thead>

    <tbody>
        {% for cita in citas %}
        <tr>
            <td>{{ cita.paciente }}</td>
            <td>{{ cita.medico.nombre_completo }}</td>
            <td>{{ cita.especialidad }}</td>
            <td>{{ cita.fecha_cita }}</td>
            <td>{{ cita.hora_cita }}</td>
            <td>
                <div class="card-actions"> <a href="{% url 'editar_cita' cita.id %}" class="btn btn-warning">Editar</a>
                    <a href="{% url 'eliminar_cita' cita.id %}" class="btn btn-danger">Eliminar</a>
                </div>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="6">No se encontraron citas.</td></tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% endblock %}